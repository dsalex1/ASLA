import{d as m,r as w,o as y,c as v,w as _,b as S,i as k,au as B,l as s,ao as b,aj as D}from"./index-W8QkwKgP.js";const E=m({__name:"Backbutton",props:{to:{}},setup(e){return(t,n)=>{const r=w("v-btn");return y(),v(k(B),{class:"text-decoration-none h1 p-2 m-n2",to:t.to},{default:_(()=>[S(r,{icon:"fas fa-angle-left",color:"black",class:"mt-n1 ms-n3 me-n2",variant:"plain"})]),_:1},8,["to"])}}});function c(e){return new Promise((t,n)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>n(e.error)})}function g(e,t){const n=indexedDB.open(e);n.onupgradeneeded=()=>n.result.createObjectStore(t);const r=c(n);return(d,h)=>r.then(p=>h(p.transaction(t,d).objectStore(t)))}let a;function u(){return a||(a=g("keyval-store","keyval")),a}function x(e,t=u()){return t("readonly",n=>c(n.get(e)))}function C(e,t,n=u()){return n("readwrite",r=>(r.put(t,e),c(r.transaction)))}const o=s(void 0),i=s([]);function F(){return b(async()=>{o.value=await j()}),D(async()=>{o.value&&(i.value=f(await l(o.value)))}),{baseDirectory:o,pdfTree:i,chooseNewSheetBaseDirectory:P}}async function j(){return await x("SheetBaseDirectory")}async function P(e){e=await window.showDirectoryPicker(),await C("SheetBaseDirectory",e),o.value=e}async function l(e){const t=[];for await(let[n,r]of e)r.kind==="directory"?t.push({name:n,handle:r,children:await l(r)}):n.endsWith(".pdf")&&t.push({name:n,handle:r});return t}function f(e){return e.sort((t,n)=>t.children&&!n.children?-1:!t.children&&n.children?1:t.name.localeCompare(n.name)),e.forEach(t=>t.children&&f(t.children)),e}export{E as _,F as u};
